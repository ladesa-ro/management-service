// For format details, see https://aka.ms/devcontainer.json. For config options, see the
// README at: https://github.com/devcontainers/templates/tree/main/src/docker-existing-docker-compose
{
  "name": "Ladesa - Management Service",

  "initializeCommand": "podman network create --ignore ladesa-net",
  "postStartCommand": "bun install; bunx nx daemon --start;",

  "shutdownAction": "stopCompose",
  "postCreateCommand": "cat /etc/os-release",

  "remoteUser": "bun",
  "service": "ladesa-management-service",
  "dockerComposeFile": ["../docker-compose.yml"],
  "workspaceFolder": "/ladesa/.sources/management-service",

  // "forwardPorts": [],

  // https://containers.dev/features
  "features": {
    "ghcr.io/devcontainers/features/git:1": {},
    "ghcr.io/devcontainers/features/github-cli:1": {},
  },

  "updateRemoteUserUID": true,
  "containerEnv": {},

  "customizations": {
    "vscode": {
      "extensions": [
        "ms-azuretools.vscode-docker",
        "biomejs.biome",
        "JannisX11.batch-rename-extension",
        "fega.export-all-typescript",
        "sleistner.vscode-fileutils",
        "mkxml.vscode-filesize",
        "mhutchie.git-graph",
        "donjayamanne.githistory",
        "huizhou.githd",
        "pipme.indent-travel",
        "oderwat.indent-rainbow",
        "YoavBls.pretty-ts-errors",
        "Gruntfuggly.todo-tree",
        "meganrogge.template-string-converter",
        "typespec.typespec-vscode"
      ],
      "settings": {
        "terminal.integrated.profiles.linux": {
          "bash": { "path": "/bin/bash" }
        },
        "terminal.integrated.defaultProfile.linux": "bash",
        "[javascript]": {
          "editor.defaultFormatter": "biomejs.biome"
        },
        "[typescript]": {
          "editor.defaultFormatter": "biomejs.biome"
        },
        "[json]": {
          "editor.defaultFormatter": "biomejs.biome"
        }
      }
    }
  }
}
